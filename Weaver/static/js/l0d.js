(this.webpackJsonpl0d=this.webpackJsonpl0d||[]).push([[0],{228:function(e,t,s){"use strict";s.r(t);var a=s(0),n=s.n(a),r=s(17),i=s.n(r),c=s(6),o=s(14),l=s(15),h=s(18),p=s(19),d=s(121),u=s(232),b={loop:{name:"Loop",enzyme:"sapi",bases_upto_snip:"a",l0_receiver:{name:"pL0R-mRFP1",ohs:{oh5:"TCC",oh3:"CGA"}},domestication_enzymes:["aari","bsai","sapi"],default:{5:"a",3:"b"},ohs:{a:{name:"A",oh:"GGAG"},b:{name:"B",oh:"TACT"},c:{name:"C",oh:"AATG"},d:{name:"D",oh:"AGGT",tc:!0},e:{name:"E",oh:"GCTT",stop:!0},f:{name:"F",oh:"CGCT"},x:{name:"X",oh:"TGGA",tc:!0}}},gb:{name:"GoldenBraid 2.0",enzyme:"bsmbi",bases_upto_snip:"a",domestication_enzymes:["bsai","bsmbi"],l0_receiver:{name:"",ohs:{oh5:"",oh3:""}},default:{5:"nt01",3:"tr13"},ohs:{nt01:{name:"5'NT 01 5'",oh:"GGAG"},nt02:{name:"5'NT 02 5'",oh:"TGAC"},nt03:{name:"5'NT 03 5'",oh:"TCCC"},tr11:{name:"TR 11 5'",oh:"TACT"},tr12:{name:"TR 12 5'",oh:"CCAT"},tr13:{name:"TR 13 5'",oh:"AATG"},tr14:{name:"TR 14 5'",oh:"AGCC",tc:!0},tr15:{name:"TR 15 5'",oh:"TTCG",tc:!0},tr16:{name:"TR 16 5'",oh:"GCAG",tc:!0},tr17:{name:"TR 17 5'",oh:"GCTT"},nt21:{name:"3'NT 21 5'",oh:"GGTA"},nt213:{name:"3'NT 21 3'",oh:"CGCT"}}},moclo:{name:"MoClo",enzyme:"bpii",bases_upto_snip:"aa",default:{5:"p5",3:"p3u5"},l0_receiver:{name:"",ohs:{oh5:"",oh3:""}},domestication_enzymes:["bsai","bpii"],ohs:{p5:{name:"P.5'",oh:"GGAG"},p3u5:{name:"P.3'-U.5'",oh:"TACT"},u3sp5:{name:"U.3'-SP.5'",oh:"AATG"},sp3cds5:{name:"SP.3'-CDS.5'",oh:"AGGT",tc:!0},cds3t5:{name:"CDS.3'-T.5'",oh:"GCTT",stop:!0},t3:{name:"T.3'",oh:"CGCT"}}}},m=s(21);function j(e){return e.replace(/[^acgtACGT]/g,"")}function g(e){return{A:"T",T:"A",G:"C",C:"G",a:"t",t:"a",g:"c",c:"g"}[e]}function O(e){return function(e){return e.split("").reverse().join("")}(function(e){return e.split("").map(g).join("")}(e))}function x(e,t){if(e.length>=7){for(var s="minTempNotReached",a=7;a<e.length;a++)if(Object(m.calculateTm)(e.substring(0,a))>t){s=e.substring(0,a);break}return s}return"minLengthError"}var f=s(119),v=s(43),C=s(22),y=s(20),N=s(120),_=s(118),w=s(27),H=s.n(w),T=s(1),I=function(e){Object(h.a)(s,e);var t=Object(p.a)(s);function s(){return Object(o.a)(this,s),t.apply(this,arguments)}return Object(l.a)(s,[{key:"render",value:function(){if(this.props.text){var e="";switch(this.props.type){case"eswen":e="Restriction site";break;case"doh":e="Domestication overhang";break;case"oh":e="Overhang";break;case"seq":e="Sequence";break;case"res":e="Internal restriction site";break;case"res_dom":e="Internal restriction site (domesticated)";break;case"tc":e="Overhang complement bases for frame conservation";break;case"stop":e="Stop codon"}return this.props.extra&&(e+=" "+this.props.extra),Object(T.jsx)(N.a,{placement:"top",overlay:Object(T.jsx)(_.a,{id:"id"+this.props.key,children:e}),children:Object(T.jsx)("span",{className:"hl hl-"+this.props.type,children:this.props.text})},"ot"+this.props.key)}return Object(T.jsx)("i",{})}}]),s}(a.Component),k=function(e){Object(h.a)(s,e);var t=Object(p.a)(s);function s(){return Object(o.a)(this,s),t.apply(this,arguments)}return Object(l.a)(s,[{key:"render",value:function(){var e=this,t="";this.props.step<5&&(t=Object(T.jsx)("button",{className:"btn btn-success float-end",onClick:function(){e.props.stepHandler(e.props.step+1)},children:"Next"}));var s="";this.props.step>1&&(s=Object(T.jsx)("button",{className:"btn btn-secondary float-end me-2",onClick:function(){e.props.stepHandler(e.props.step-1)},children:"Prev"}));var a="",n="";return"t"===this.props.position&&(n=Object(T.jsx)("hr",{})),"b"===this.props.position&&(a=Object(T.jsx)("hr",{})),Object(T.jsxs)("div",{className:"col-12",children:[a,Object(T.jsxs)("div",{className:"flow_root",children:[t,s]}),n]})}}]),s}(n.a.Component),q=function(e){Object(h.a)(s,e);var t=Object(p.a)(s);function s(){return Object(o.a)(this,s),t.apply(this,arguments)}return Object(l.a)(s,[{key:"render",value:function(){var e=this,t=b[this.props.standard];return Object(T.jsxs)(v.a.Select,{onChange:this.props.handler,value:this.props.cv,"aria-label":t.name+" OHs / "+this.props.oh+"'",className:"oh-select",ref:"ref"+this.props.oh,children:[Object.keys(t.ohs).map((function(s){return Object(T.jsx)("option",{value:s,children:t.ohs[s].name+" - "+t.ohs[s].oh+(t.ohs[s].tc?" [ "+e.props.tc+" ]":"")+(t.ohs[s].stop?" [ STOP ]":"")},s)})),Object(T.jsx)("option",{value:"custom",children:"Custom"},"custom")]})}}]),s}(a.Component),S=function(e){Object(h.a)(s,e);var t=Object(p.a)(s);function s(){return Object(o.a)(this,s),t.apply(this,arguments)}return Object(l.a)(s,[{key:"render",value:function(){return Object(T.jsx)(y.a,{controlId:"ohs"+this.props.oh,label:this.props.standard+" OHs / "+this.props.oh+"'",children:Object(T.jsx)(q,{standard:this.props.standard,oh:this.props.oh,handler:this.props.handler,cv:this.props.cv,tc:this.props.tc})})}}]),s}(a.Component),A=function(e){Object(h.a)(s,e);var t=Object(p.a)(s);function s(){return Object(o.a)(this,s),t.apply(this,arguments)}return Object(l.a)(s,[{key:"render",value:function(){return Object(T.jsxs)("tr",{children:[Object(T.jsxs)("th",{scope:"row",children:[this.props.type," ",Object(T.jsx)("i",{className:"bi bi-clipboard copy_clipboard","data-cc":this.props.name+"-"+this.props.type})]}),Object(T.jsx)("td",{children:this.props.seq.length}),Object(T.jsxs)("td",{children:[Object(T.jsx)("i",{className:"bi bi-clipboard copy_clipboard","data-cc":this.props.seq})," ",this.props.seq]})]})}}]),s}(a.Component),L=function(e){Object(h.a)(s,e);var t=Object(p.a)(s);function s(){return Object(o.a)(this,s),t.apply(this,arguments)}return Object(l.a)(s,[{key:"render",value:function(){var e=this.props.name+"-F"+(this.props.idx+1),t=[],s=this.props.eswen+this.props.extra5+this.props.template+this.props.extra3+O(this.props.eswen),a="pcr",n="PCR",r="";if(s.length<=this.props.pcrMinLength&&(a="oann",n="GBlock or Oligo Annealing"),"oann"===a)t.push(Object(T.jsx)(A,{seq:s,name:e,type:"F"})),t.push(Object(T.jsx)(A,{seq:O(s),name:e,type:"R"}));else{var i=x(this.props.template,this.props.pcrTm),c=x(O(this.props.template),this.props.pcrTm);"minTempNotReached"!==i&&"minLengthError"!==i||(i=this.props.template,c=O(this.props.template),"minTempNotReached"===i&&(r=Object(T.jsx)("div",{className:"alert alert-danger",children:"Tm below min requirement"})),"minLengthError"===i&&(r=Object(T.jsx)("div",{className:"alert alert-danger",children:"Template length below min requirement (7 bp)"})));var o=this.props.eswen+this.props.extra5+i;t.push(Object(T.jsx)(A,{seq:o,name:e,type:"F"}));var l=this.props.eswen+O(this.props.extra3)+c;t.push(Object(T.jsx)(A,{seq:l,name:e,type:"R"}))}return Object(T.jsxs)("div",{className:"alert alert-light border text-break",children:[Object(T.jsxs)("h5",{children:[Object(T.jsx)("span",{className:"badge bg-secondary text-light",children:e}),Object(T.jsxs)("span",{className:"small fw-light ms-2",children:[n," / ",s.length," bp"]})]}),r,Object(T.jsxs)("table",{className:"table small",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{scope:"col",children:"Type"}),Object(T.jsx)("th",{scope:"col",children:"Length"}),Object(T.jsx)("th",{scope:"col",children:"Seq"})]})}),Object(T.jsx)("tbody",{children:t})]})]})}}]),s}(a.Component),G=function(e){Object(h.a)(s,e);var t=Object(p.a)(s);function s(e){var a;return Object(o.a)(this,s),(a=t.call(this,e)).resInputHandle=function(e,t){a.props.resInputHandle(e,t)},void 0===e.new_res&&a.resInputHandle(a.props.res.idx,a.props.res.seq),a}return Object(l.a)(s,[{key:"getNucleotidesFromIUPAC",value:function(e){switch(e.toLowerCase()){case"a":return["a"];case"t":return["t"];case"c":return["c"];case"g":return["g"];case"r":return["g","a"];case"y":return["t","c"];case"m":return["a","c"];case"k":return["g","t"];case"s":return["g","c"];case"w":return["a","t"];case"h":return["a","c","t"];case"b":return["g","t","c"];case"v":return["g","c","a"];case"d":return["g","a","t"];case"n":return["g","a","c","t"];default:return e}}},{key:"generateVariations",value:function(e){if(1===e.length)return this.getNucleotidesFromIUPAC(e);var t=[],s=this.getNucleotidesFromIUPAC(e.charAt(0)),a=this.generateVariations(e.substring(1,e.length));return s.forEach((function(e){a.forEach((function(s){t.push(e+s)}))})),t}},{key:"getVariation",value:function(e){if(3!==e.length)return alert("Domestication site length != 3"),!1;var t=m.aminoAcidToDegenerateDnaMap[Object(m.getAminoAcidFromSequenceTriplet)(e).value.toLowerCase()],s=this.generateVariations(t),a=!1;return s.forEach((function(t){t!==e&&(a=t)})),a}},{key:"recommended_codon",value:function(){var e=this.props.new_res,t=this.props.res;if(e&&e.length>=3){var s=t.seq.substring(0,t.start%3),a=t.seq.substring(t.start%3,t.start%3+3),n=this.getVariation(a);return n?(s+=n,s+=t.seq.substring(t.start%3+3,e.length)):(alert("No variation found"),t)}return alert("No Restriction enzyme site set"),""}},{key:"render",value:function(){var e=this;if(this.props.res){var t="",s=this.props.res,a=this.props.new_res?this.props.new_res:"";s.seq.toLowerCase()===a.toLowerCase()&&(t=Object(T.jsx)("div",{className:"alert alert-danger",children:"Restriction site unchanged"}));var n="";s.seq.length!==a.length&&a.length>0&&(n=Object(T.jsx)("div",{className:"alert alert-warning",children:"New restriction site has different length than original"}));var r="";if(a){var i=a.substring(0,s.start%3)+"-";1===i.length&&(i=""),r=" ("+i+a.substring(s.start%3,s.start%3+3)+")"}var c=this.recommended_codon();return Object(T.jsxs)("div",{className:"alert alert-info border",children:[Object(T.jsxs)("h5",{children:["Restriction site # ",s.idx+1]}),Object(T.jsxs)("div",{className:"row",children:[Object(T.jsxs)("div",{className:"col-7",children:[Object(T.jsx)(y.a,{controlId:"resInput"+s.idx,label:"New restriction enzyme site",children:Object(T.jsx)(C.a,{onChange:function(t){return e.resInputHandle(s.idx,t.target.value)},value:a,"aria-label":"New restriction enzyme site"})}),Object(T.jsxs)("div",{className:"mb-2",children:[Object(T.jsx)("button",{type:"button",className:"btn btn-secondary me-2",onClick:function(t){return e.resInputHandle(s.idx,s.seq)},children:"Reset"}),Object(T.jsx)("button",{type:"button",className:"btn btn-success me-2",onClick:function(t){return e.resInputHandle(s.idx,c)},children:"Recommended"})]})]}),Object(T.jsx)("div",{className:"col-5",children:Object(T.jsxs)("div",{className:"mb-2 small",children:[Object(T.jsxs)("span",{children:[Object(T.jsx)("strong",{children:"Enzyme"}),": ",s.enzyme]}),Object(T.jsx)("br",{}),Object(T.jsxs)("span",{children:[Object(T.jsx)("strong",{children:"Position"}),": ",s.start+1+" to "+(s.end+1)]}),Object(T.jsx)("br",{}),Object(T.jsxs)("span",{children:[Object(T.jsx)("strong",{children:"Frame position"}),": ",s.start%3+1+r]}),Object(T.jsx)("br",{})]})})]}),t,n]})}return Object(T.jsx)("div",{})}}]),s}(a.Component),E=function(e){Object(h.a)(s,e);var t=Object(p.a)(s);function s(e){var a;Object(o.a)(this,s),(a=t.call(this,e)).resInputHandle=function(e,t){var s=a.state.new_res;s[e]=j(t),a.setState({new_res:s,apiCall_result:[]})},a.stepHandler=function(e){a.props.stepHandler(e)};var n=[];return e.res.forEach((function(e){n.push(e.seq)})),a.state={new_res:n,apiCall_result:[]},a}return Object(l.a)(s,[{key:"componentWillReceiveProps",value:function(e){var t=[];e.res.forEach((function(e){t.push(e.seq)})),this.setState({new_res:t,apiCall_result:[]})}},{key:"commonStart",value:function(e,t){for(var s="",a=0;a<Math.min(e.length,t.length)&&e.charAt(a).toLowerCase()===t.charAt(a).toLowerCase();a++)s+=e.charAt(a);return s}},{key:"firstCommonIndexAfterDiff",value:function(e,t){var s=null,a=!1;if(e.length===t.length)for(var n=0;n<t.length;n++)if(e.charAt(n).toLowerCase()===t.charAt(n).toLowerCase()){if(a&&e.substring(n,t.length)===t.substring(n,t.length)){s=n;break}}else a=!0;return s}},{key:"lastCommonIndex",value:function(e,t){for(var s=0,a=0;a<Math.min(e.length,t.length)&&e.charAt(a).toLowerCase()===t.charAt(a).toLowerCase();a++)s=a;return s}},{key:"resParts",value:function(e,t){var s=this.lastCommonIndex(e,t),a=this.firstCommonIndexAfterDiff(e,t),n=e.substring(0,s+1),r="",i="";return a?(r=e.substring(s+1,a),i=e.substring(a,e.length)):r=e.substring(s+1,e.length),{start:n,diff:r,end:i}}},{key:"formatOHEnd",value:function(e,t){return e.substring(0,e.length-t).toLowerCase()+e.substring(e.length-t,e.length).toUpperCase()}},{key:"formatOH",value:function(e,t){return e.substring(0,t).toUpperCase()+e.substring(t,e.length).toLowerCase()}},{key:"apiCall",value:function(e){var t=this;this.setState({apiCall_result:{wait:!0}});var s="/inventory/api/fidelity_calc/sapi/"+e.join("-");u.a.get(s).then((function(e){var s=e.data.ligation_frequency_matrix_html.replaceAll("container","lfm_container");s=(s=s.replaceAll("row","lfm_row")).replaceAll("cell","lfm_cell"),t.setState({apiCall_result:{fidelity:e.data.fidelity,render:s}})})).catch((function(e){t.setState({apiCall_result:{error:e}})}))}},{key:"render",value:function(){var e=this,t=[],s=[],a=[],n="",r=[];r.push(Object(T.jsx)("h3",{children:"Restriction sites"}));var i=!1,c=[],o="",l="",h="",p=[],d=!1,u="tga",b=Math.abs(this.props.the_re.topSnipOffset-this.props.the_re.bottomSnipOffset);if(p.push(this.props.l0_receiver.ohs.oh5),a.push(Object(T.jsx)(I,{text:this.props.eswen,type:"eswen",extra:" ("+this.props.the_re.name+")"},"1")),n+=this.props.eswen,a.push(Object(T.jsx)(I,{text:this.props.l0_receiver.ohs.oh5,type:"doh"},"2")),n+=this.props.l0_receiver.ohs.oh5,o+=this.props.l0_receiver.ohs.oh5.toUpperCase(),a.push(Object(T.jsx)(I,{text:this.props.oh5.oh,extra:this.props.oh5.name,type:"oh"},"3")),n+=this.props.oh5.oh,o+=this.props.oh5.oh.toUpperCase(),this.props.res.length){var m=0;this.props.res.forEach((function(t,s){a.push(Object(T.jsx)(I,{text:e.props.seq.substring(m,t.start),type:"seq",extra:" fragment "+(s+1)},"s-"+s)),n+=e.props.seq.substring(m,t.start);var u=e.props.seq.substring(m,t.start),j="res",g=t.seq;if(e.state.new_res[s]&&e.state.new_res[s]!==t.seq&&(j="res_dom",g=e.state.new_res[s]),a.push(Object(T.jsx)(I,{text:g,type:j,extra:" # "+(s+1)},"r-"+s)),n+=g,u+=e.commonStart(e.state.new_res[s],t.seq),s){var O=e.resParts(e.state.new_res[s-1],e.props.res[s-1].seq);o=e.formatOH(O.diff,b),u=e.formatOH(O.end+u,b-o.length),p.push((O.diff+u).substring(0,b).toUpperCase())}var x=e.resParts(e.state.new_res[s],t.seq);if(l=e.formatOH((x.diff+x.end+e.props.seq.substring(t.end+1,e.props.seq.length)).substring(0,b),b),s!==e.props.res.length-1&&(u=e.formatOHEnd(u,b-l.length)),l.length<b&&(h=Object(T.jsx)("div",{className:"alert alert-danger",children:"OH length under optimal length"})),c.push({idx:s,extra5:o,template:u,extra3:l}),r.push(Object(T.jsx)(G,{resInputHandle:e.resInputHandle,new_res:e.state.new_res[s],res:t})),t.seq.toLowerCase()===e.state.new_res[s].toLowerCase()&&(d=!0),r.push(h),i=!0,m=t.end+1,s===e.props.res.length-1){a.push(Object(T.jsx)(I,{text:e.props.seq.substring(t.end+1,e.props.seq.length),type:"seq",extra:" fragment "+(s+2)},"s-"+(s+1))),n+=e.props.seq.substring(t.end+1,e.props.seq.length);var f=e.resParts(e.state.new_res[s],t.seq);o=e.formatOH(f.diff,b),u=e.formatOH(f.end+e.props.seq.substring(m,e.props.seq.length),b-o.length),p.push((f.diff+u).substring(0,b).toUpperCase()),c.push({idx:s+1,extra5:o,template:u,extra3:""})}}))}else a.push(Object(T.jsx)(I,{text:this.props.seq,type:"seq"},"s-1")),n+=this.props.seq,c.push({idx:0,extra5:o,template:this.props.seq.toLowerCase(),extra3:""});a.push(Object(T.jsx)(I,{text:this.props.oh3.tc?this.props.tc:"",type:"tc"},"6")),n+=this.props.oh3.tc?this.props.tc:"",l=this.props.oh3.tc?this.props.tc:"",a.push(Object(T.jsx)(I,{text:this.props.oh3.stop?u:"",type:"stop"},"7")),n+=this.props.oh3.stop?u:"",l+=this.props.oh3.stop?u:"",a.push(Object(T.jsx)(I,{text:this.props.oh3.oh,extra:this.props.oh3.name,type:"oh"},"8")),n+=this.props.oh3.oh,l+=this.props.oh3.oh.toUpperCase(),a.push(Object(T.jsx)(I,{text:this.props.l0_receiver.ohs.oh3,type:"doh"},"9")),n+=this.props.l0_receiver.ohs.oh3,l+=this.props.l0_receiver.ohs.oh3.toUpperCase(),p.push(this.props.l0_receiver.ohs.oh3),a.push(Object(T.jsx)(I,{text:O(this.props.eswen),type:"eswen",extra:" (RevComp) ("+this.props.the_re.name+")"},"10")),n+=O(this.props.eswen),c[c.length-1].extra3=l,c.forEach((function(t){s.push(Object(T.jsx)(L,{name:e.props.name,pcrMinLength:e.props.pcrMinLength,pcrTm:e.props.pcrTm,idx:t.idx,extra5:t.extra5,extra3:t.extra3,template:t.template,eswen:e.props.eswen}))})),i||r.push(Object(T.jsx)("div",{className:"alert alert-info",children:"No domestication sites"})),r.push(Object(T.jsxs)("h3",{children:["Ligation overhangs",Object(T.jsx)("i",{className:"bi bi-clipboard copy_clipboard ms-2","data-cc":p.join(",")})]}));var j=[];j.push(Object(T.jsxs)("div",{className:"alert alert-warning",children:["Overhangs: ",p.join(" + ")]})),this.state.apiCall_result.wait?j.push(Object(T.jsxs)("button",{className:"btn btn-success",onClick:function(){e.apiCall()},children:["Wait ",Object(T.jsx)("span",{class:"spinner-grow spinner-grow-sm text-light",role:"status",children:Object(T.jsx)("span",{class:"visually-hidden",children:"Loading..."})})]})):this.state.apiCall_result.fidelity?(j.push(Object(T.jsxs)("div",{className:"alert alert-success",children:["Ligation Fidelity: ",this.state.apiCall_result.fidelity,"%"]})),j.push(Object(T.jsxs)("div",{className:"alert alert-light",children:[Object(T.jsx)("h4",{children:"Ligation fidelity matrix"}),Object(T.jsx)("div",{id:"fidelity_result",dangerouslySetInnerHTML:{__html:this.state.apiCall_result.render}})]})),j.push(Object(T.jsxs)("div",{className:"alert alert-info",children:["Conditions: SapI / 37-16 cycling. Using ",Object(T.jsxs)("a",{href:"https://ligasefidelity.neb.com/viewset/run.cgi",target:"_blank",rel:"noreferrer",children:["NEBridge Ligase Fidelity Viewer ",Object(T.jsx)("i",{className:"bi bi-box-arrow-up-right"})]})]}))):(this.state.apiCall_result.error&&j.push(Object(T.jsxs)("div",{className:"alert alert-danger",children:["Error. Try again. [",this.state.apiCall_result.error,"]"]})),j.push(Object(T.jsx)("button",{className:"btn btn-success",onClick:function(){e.apiCall(p)},children:"Estimate fidelity"}))),r.push(Object(T.jsx)("div",{className:"alert alert-light border text-break",children:Object(T.jsx)("div",{className:"mb-2",children:j})})),r.push(Object(T.jsx)(k,{step:3,position:"b",stepHandler:this.stepHandler}));var g=n.substring(this.props.eswen.length+this.props.l0_receiver.ohs.oh5.length+this.props.oh5.oh.length,n.length-this.props.eswen.length-this.props.l0_receiver.ohs.oh3.length-this.props.oh3.oh.length);return d&&(t.unshift(Object(T.jsx)("div",{className:"alert alert-danger",children:"Restriction site domestication(s) pending"})),s.unshift(Object(T.jsx)("div",{className:"alert alert-danger",children:"Restriction site domestication(s) pending"}))),t.unshift(Object(T.jsxs)("h3",{children:[this.props.name," ",Object(T.jsx)("i",{className:"bi bi-clipboard copy_clipboard ms-2","data-cc":n})," ",Object(T.jsx)("span",{className:"badge text-dark",children:Object(T.jsxs)("form",{method:"POST",action:"/inventory/plasmid/create/l0d",target:"_blank",class:"default-style",children:[Object(T.jsx)("input",{type:"hidden",name:"oh5-name",value:this.props.oh5.name}),Object(T.jsx)("input",{type:"hidden",name:"oh5-oh",value:this.props.oh5.oh}),Object(T.jsx)("input",{type:"hidden",name:"oh3-name",value:this.props.oh3.name}),Object(T.jsx)("input",{type:"hidden",name:"oh3-tc",value:this.props.oh3.tc?this.props.tc:""}),Object(T.jsx)("input",{type:"hidden",name:"oh3-stop",value:this.props.oh3.stop?u:""}),Object(T.jsx)("input",{type:"hidden",name:"oh3-oh",value:this.props.oh3.oh}),Object(T.jsx)("input",{type:"hidden",name:"name",value:this.props.name}),Object(T.jsx)("input",{name:"csrfmiddlewaretoken",value:window.csrf_token,type:"hidden"}),Object(T.jsx)("input",{type:"hidden",name:"seq",value:g}),Object(T.jsxs)("button",{className:"btn btn-primary btn-sm",type:"submit",children:["Create plasmid ",Object(T.jsx)("i",{className:"bi bi-box-arrow-up-right"})]})]})})]})),t.push(Object(T.jsx)("div",{className:"alert alert-light border text-break",children:a})),t.push(Object(T.jsx)(k,{step:4,position:"b",stepHandler:this.stepHandler})),s.push(Object(T.jsx)(k,{step:5,position:"b",stepHandler:this.stepHandler})),[Object(T.jsx)("div",{className:"collapse",children:r}),Object(T.jsx)("div",{className:"collapse text-break",children:t}),Object(T.jsx)("div",{className:"collapse",children:s})]}}]),s}(a.Component),R="loop",z={sequence:"",standard:R,custom_oh5:"",custom_oh3:"",oh5:b[R].default[5],oh3:b[R].default[3],pcrTm:60,pcrMinLength:80,name:"Part",tc:"tc",base_pairs_from_end:"aa",enzymes:b[R].domestication_enzymes},P=function(e){Object(h.a)(s,e);var t=Object(p.a)(s);function s(e){var a;return Object(o.a)(this,s),(a=t.call(this,e)).resetState=function(){a.setState(z)},a.tcInputChangeHandle=function(e){a.setState({tc:e.target.value})},a.basePairsFromEndInputChangeHandle=function(e){a.setState({base_pairs_from_end:e.target.value})},a.domEnzymesInputChangeHandle=function(e){var t=[];e.forEach((function(e){t.push(e.value)})),a.setState({enzymes:t})},a.pcrMinLengthInputChangeHandle=function(e){a.setState({pcrMinLength:e.target.value})},a.pcrTmInputChangeHandle=function(e){a.setState({pcrTm:e.target.value})},a.nameInputChangeHandle=function(e){a.setState({name:e.target.value})},a.sequenceInputChangeHandle=function(e){a.setState({sequence:j(e.target.value)})},a.partStandardChangeHandle=function(e){var t=b[e.target.value];t&&a.setState({standard:e.target.value,oh5:t.default[5],oh3:t.default[3],enzymes:t.domestication_enzymes})},a.OH5InputChangeHandle=function(e){a.setState({oh5:e.target.value})},a.OH3InputChangeHandle=function(e){a.setState({oh3:e.target.value})},a.customOh5InputHandle=function(e){a.setState({custom_oh5:j(e.target.value)})},a.customOh3InputHandle=function(e){a.setState({custom_oh3:j(e.target.value)})},a.partStandardInputItems=Object.keys(b).map((function(e){return Object(T.jsx)("option",{value:e,children:b[e].name},e)})),a.getEnzymesSelect=function(e){var t=[];return e.forEach((function(e){t.push({value:e,label:m.aliasedEnzymesByName[e].name})})),t},a.state=z,a}return Object(l.a)(s,[{key:"findInFrame",value:function(e,t){for(var s=0;s<e.length;s++)for(var a=0;a<t.length;a+=3)if(e[s].toLowerCase()===t.substring(a,a+3).toLowerCase())return a;return!1}},{key:"stepHandler",value:function(e){H()("#steps").children().removeClass("show"),H()("#steps > *:nth-child("+e+")").addClass("show");var t=H()("#pagination").children(),s=H()("#pagination > *:nth-child("+e+")");t.removeClass("active"),s.addClass("active"),t.each((function(){H()(this).find("span:first-child").removeClass("bg-light").removeClass("text-primary").addClass("bg-"+H()(this).attr("data-color")),H()(this).find("button span:last-child").addClass("text-"+H()(this).attr("data-color"))})),s.find("button span:first-child").addClass("bg-light").addClass("text-primary"),s.find("button span:last-child").removeClass("text-"+s.attr("data-color"))}},{key:"componentDidUpdate",value:function(){window.onReady()}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e,t,s=this,a=b[this.state.standard],n=[];Object.keys(m.aliasedEnzymesByName).forEach((function(e,t){m.aliasedEnzymesByName[e].isType2S&&n.push({value:e,label:m.aliasedEnzymesByName[e].name})})),"custom"===this.state.oh5&&(e=Object(T.jsx)(y.a,{controlId:"customOh5Input",label:"Custom OH 5'",children:Object(T.jsx)(C.a,{onChange:this.customOh5InputHandle,value:this.state.custom_oh5,"aria-label":"Custom OH 5"})})),"custom"===this.state.oh3&&(t=Object(T.jsx)(y.a,{controlId:"customOh3Input",label:"Custom OH 3'",children:Object(T.jsx)(C.a,{onChange:this.customOh3InputHandle,value:this.state.custom_oh3,"aria-label":"Custom OH 3"})}));var r=this.state.sequence.toLowerCase(),i=[];if(r){var o=[];this.state.enzymes.forEach((function(e){o.push(m.aliasedEnzymesByName[e])}));var l=Object(m.getCutsitesFromSequence)(r,!0,o),h=[];Object.keys(l).length&&Object.entries(l).forEach((function(e){var t=Object(c.a)(e,2);t[0];t[1].forEach((function(e,t){var s=e.recognitionSiteRange.start,a=e.recognitionSiteRange.end;s<a&&h.push({seq:r.substring(e.recognitionSiteRange.start,e.recognitionSiteRange.end+1),start:s,end:a,enzyme:e.name})})),h.sort((function(e,t){return e.start-t.start})),h.forEach((function(e,t){e.idx=t}))}));var p=m.aliasedEnzymesByName[a.enzyme],u=this.state.base_pairs_from_end+p.site.toUpperCase()+a.bases_upto_snip,j={name:"Custom",oh:this.state.custom_oh5};"custom"!==this.state.oh5&&(j=a.ohs[this.state.oh5]);var g={name:"Custom",oh:this.state.custom_oh3};"custom"!==this.state.oh3&&(g=a.ohs[this.state.oh3]),i=Object(T.jsx)(E,{name:this.state.name,pcrMinLength:this.state.pcrMinLength,pcrTm:this.state.pcrTm,the_re:p,res:h,oh5:j,oh3:g,l0_receiver:a.l0_receiver,eswen:u,seq:r,tc:this.state.tc,stepHandler:this.stepHandler})}else i=[Object(T.jsxs)("div",{className:"collapse",children:[Object(T.jsx)("div",{className:"alert alert-info",children:"Set a sequence to continue"}),Object(T.jsx)(k,{step:3,position:"b",stepHandler:this.stepHandler})]}),Object(T.jsxs)("div",{className:"collapse",children:[Object(T.jsx)("div",{className:"alert alert-info",children:"Set a sequence to continue"}),Object(T.jsx)(k,{step:4,position:"b",stepHandler:this.stepHandler})]}),Object(T.jsxs)("div",{className:"collapse",children:[Object(T.jsx)("div",{className:"alert alert-info",children:"Set a sequence to continue"}),Object(T.jsx)(k,{step:5,position:"b",stepHandler:this.stepHandler})]})];var O=Object(T.jsx)("div",{className:"alert alert-alert border",children:"No ATG found in frame 1"}),x=Object(T.jsx)("div",{className:"alert alert-light border",children:"No STOP codon found in frame 1"}),N=this.findInFrame(["atg"],r),_=this.findInFrame(["taa","tga","tag"],r);return!1!==N&&(O=Object(T.jsxs)("div",{className:"alert alert-success",children:["ATG found in frame 1, position ",N+1]})),!1!==_&&(x=Object(T.jsxs)("div",{className:"alert alert-danger",children:["STOP codon found in frame 1, position ",_+1]})),Object(T.jsxs)(f.a,{children:[Object(T.jsxs)("div",{className:"flow_root",children:[Object(T.jsx)("nav",{"aria-label":"Page navigation",className:"float-start",children:Object(T.jsxs)("ul",{id:"pagination",className:"pagination",children:[Object(T.jsx)("li",{className:"page-item active","data-color":"primary",onClick:function(){s.stepHandler(1)},children:Object(T.jsxs)("button",{className:"page-link",children:[Object(T.jsx)("span",{className:"badge bg-light text-primary",children:"Step 1"}),Object(T.jsx)("span",{className:"ms-1",children:"Standard, enzymes & params"})]})}),Object(T.jsx)("li",{className:"page-item","data-color":"primary",onClick:function(){s.stepHandler(2)},children:Object(T.jsxs)("button",{className:"page-link",children:[Object(T.jsx)("span",{className:"badge bg-primary",children:"Step 2"}),Object(T.jsx)("span",{className:"ms-1",children:"Sequence"})]})}),Object(T.jsx)("li",{className:"page-item","data-color":"primary",onClick:function(){s.stepHandler(3)},children:Object(T.jsxs)("button",{className:"page-link",children:[Object(T.jsx)("span",{className:"badge bg-primary",children:"Step 3"}),Object(T.jsx)("span",{className:"ms-1",children:"Domestication"})]})}),Object(T.jsx)("li",{className:"page-item","data-color":"success",onClick:function(){s.stepHandler(4)},children:Object(T.jsxs)("button",{className:"page-link",children:[Object(T.jsx)("span",{className:"badge bg-success",children:"Result 1"}),Object(T.jsx)("span",{className:"ms-1 text-success fw-bold",children:"Final sequence"})]})}),Object(T.jsx)("li",{className:"page-item","data-color":"success",onClick:function(){s.stepHandler(5)},children:Object(T.jsxs)("button",{className:"page-link",children:[Object(T.jsx)("span",{className:"badge bg-success",children:"Result 2"}),Object(T.jsx)("span",{className:"ms-1 text-success fw-bold",children:"Oligos"})]})})]})}),Object(T.jsx)("button",{className:"btn btn-secondary me-2 float-end",onClick:function(){s.resetState()},children:Object(T.jsx)("i",{class:"bi bi-arrow-clockwise"})})]}),Object(T.jsxs)("div",{id:"steps",className:"border alert alert-light mb-4",children:[Object(T.jsxs)("div",{className:"collapse show",children:[Object(T.jsx)("h3",{children:"Standard"}),Object(T.jsx)(y.a,{controlId:"partStandardInput",label:"Assembly Standard",children:Object(T.jsx)(v.a.Select,{onChange:this.partStandardChangeHandle,"aria-label":"Part standard input",children:this.partStandardInputItems})}),Object(T.jsx)("h3",{className:"mt-2",children:"Position"}),Object(T.jsx)(S,{standard:this.state.standard,oh:"5",cv:this.state.oh5,handler:this.OH5InputChangeHandle,tc:this.state.tc}),e,Object(T.jsx)(S,{standard:this.state.standard,oh:"3",cv:this.state.oh3,handler:this.OH3InputChangeHandle,tc:this.state.tc}),t,Object(T.jsx)("h3",{className:"mt-2",children:"Enzymes"}),Object(T.jsx)(v.a.Text,{className:"text-muted",children:"Domestication enzymes"}),Object(T.jsx)(d.a,{options:n,value:this.getEnzymesSelect(this.state.enzymes),isMulti:!0,className:"basic-multi-select mb-2",classNamePrefix:"select",onChange:this.domEnzymesInputChangeHandle}),Object(T.jsx)(y.a,{controlId:"tcInput",label:"Overhang complement bases for frame conservation",children:Object(T.jsx)(C.a,{onChange:this.tcInputChangeHandle,value:this.state.tc,"aria-label":"Overhang complement bases for frame conservation"})}),Object(T.jsx)("h3",{className:"mt-2",children:"Parameters"}),Object(T.jsxs)("div",{children:[Object(T.jsx)(y.a,{controlId:"pcrMinLengthInput",label:"Length under which part is prepared by GBlock or oligo annealing instead of PCR",children:Object(T.jsx)(C.a,{onChange:this.pcrMinLengthInputChangeHandle,value:this.state.pcrMinLength,"aria-label":"pcr/oann min length"})}),Object(T.jsx)(y.a,{controlId:"pcrTmInput",label:"Tm PCR primers \xb0C",children:Object(T.jsx)(C.a,{onChange:this.pcrTmInputChangeHandle,value:this.state.pcrTm,"aria-label":"PCR Tm primers"})}),Object(T.jsx)(y.a,{controlId:"basePairsFromEnd",label:"Base pairs from end",children:Object(T.jsx)(C.a,{onChange:this.basePairsFromEndInputChangeHandle,value:this.state.base_pairs_from_end,"aria-label":"Base pairs from end"})})]}),Object(T.jsx)(k,{step:1,position:"b",stepHandler:this.stepHandler})]}),Object(T.jsxs)("div",{className:"collapse",children:[Object(T.jsx)("h3",{children:"Part name"}),Object(T.jsx)(y.a,{controlId:"nameInput",label:"Name Input",children:Object(T.jsx)(C.a,{onChange:this.nameInputChangeHandle,value:this.state.name,"aria-label":"Name Input"})}),Object(T.jsxs)("h3",{className:"mt-2",children:["Sequence (",this.state.sequence.length," bp)"]}),Object(T.jsxs)(y.a,{controlId:"sequenceInput",label:"Sequence Input",children:[Object(T.jsx)(C.a,{onChange:this.sequenceInputChangeHandle,as:"textarea",value:this.state.sequence,"aria-label":"Sequence Input"}),Object(T.jsx)(v.a.Text,{className:"text-muted",children:"Non ATGC characters are automatically removed."})]}),O,x,Object(T.jsx)(k,{step:2,position:"b",stepHandler:this.stepHandler})]}),i]})]})}}]),s}(a.Component);s(227);i.a.render(Object(T.jsx)(n.a.StrictMode,{children:Object(T.jsx)(P,{})}),document.getElementById("root-l0d"))}},[[228,1,2]]]);
//# sourceMappingURL=l0d.js.map